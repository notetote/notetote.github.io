function setDefault(e,t){localStorage.getItem(e)||localStorage.setItem(e,t)}function addScript(e,t){let a=document.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("src",e),t?document.head.appendChild(a):document.body.appendChild(a)}function addStyle(e){let t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e),document.head.appendChild(t)}function inScript(e,t,a){let o=document.createElement("script");o.setAttribute("type","text/javascript"),t&&(o.id=t),o.innerHTML=e,a?document.head.appendChild(o):document.body.appendChild(o)}function inStyle(e,t){let a=document.createElement("style");a.setAttribute("type","text/css"),t&&(a.id=t),a.innerHTML=e,document.head.appendChild(a)}function clearLoad(){let e=localStorage.theme,t=localStorage.themeDusk,a=localStorage.themeDawn;localStorage.clear(),localStorage.theme=e,localStorage.themeDusk=t,localStorage.themeDawn=a}function localGet(e){return localStorage.getItem(e)||(clearLoad(),window.location.reload()),decodeURIComponent(localStorage.getItem(e))}async function fetchThis(e){let t=window.location.origin+e,a=await fetch(t),o=await a.text();return o}function pathway(){return!localStorage.version||parseFloat(localStorage.version)<version||"load"===path?(clearLoad(),"path_load.min.js"):""===path?"path_home.min.js":("search"!==path||window.location.search.match(/[\?\&]s=[^\?\&]+/)||(window.location.href=window.location.origin),localStorage.getItem("fable_"+path)?"path_"+path+".min.js":"path_404.min.js")}function appendectomy(){let e=document.querySelectorAll("script[src*='appendix'],[appendix]");for(let t=0;t<e.length;t++)e[t].remove()}function navVer(){try{let e=document.querySelector("nav span.version");e.innerHTML="v"+version.toString()}catch(e){}}function loadTime(){try{let e=parseFloat((Date.now()-loadInit)/1e3).toFixed(2);document.querySelectorAll("footer span")[1].innerHTML="In "+e+" seconds"}catch(e){}navVer()}function forward(){pakoHere&&forageHere&&addScript("appendix/"+pathway()+datever,!0)}function leadEvent(e){let t=new CustomEvent("keyEvent",{detail:e});document.dispatchEvent(t)}const version=20230808145433,datever="?"+version.toString();"?app"===window.location.search&&(localStorage.appState="true"),setDefault("theme","auto"),setDefault("themeDusk","tdusk_aCSS"),setDefault("themeDawn","tdawn_aCSS"),setDefault("themeColor","tcolor_purpleCSS");const path=window.location.pathname.replace(/\//g,"");let skip=!1,pakoHere=!1,forageHere=!1;document.addEventListener("keyEvent",function(e){"pako"===e.detail&&(pakoHere=!0),"forage"===e.detail&&(forageHere=!0),forward()}),localStorage.favJS?inScript(localGet("favJS"),"favJS",!0):addScript("js/fav.min.js",!0),pathway().match(/_load\./)?(addScript("lib/pakodeflate.min.js",!0),addScript("lib/localforage.min.js",!0)):pathway().match(/_search\./)?(localStorage.localforageLIB?inScript(localGet("localforageLIB"),"localforageLIB",!0):addScript("lib/localforage.min.js",!0),localStorage.pako_inflateLIB?inScript(localGet("pakoinflateLIB"),"pakoinflateLIB",!0):addScript("lib/pakoinflate.min.js",!0)):skip=!0,pathway().match(/_load\./)||(inStyle(localGet(localStorage.themeDusk),"duskCSS"),inStyle(localGet(localStorage.themeDawn),"dawnCSS"),inStyle(localGet(localStorage.themeColor),"colorCSS"),inStyle(localGet("mainCSS"),"mainCSS"),inStyle(localGet("fontasmCSS"),"fontasmCSS"),inScript(localGet("themeJS"),"themeJS",!0)),document.addEventListener("DOMContentLoaded",function(){!0===skip&&addScript("appendix/"+pathway()+datever,!0)}),document.addEventListener("readystatechange",function(){if("complete"===document.readyState){loadTime(),favSwitch(!0),favSwitch(!1),favSwitch(colorScheme.matches);try{setTheme()}catch(e){}}});